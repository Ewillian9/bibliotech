{% extends 'base.html.twig' %}

{% block title %}Détails du livre
{% endblock %}

{% block body %}
	{% for msg in app.flashes('error') %}
		<div class="bg-red-100 text-red-700 p-2 rounded mb-2">
			{{ msg }}
		</div>
	{% endfor %}
	{% for msg in app.flashes('success') %}
		<div class="bg-green-100 text-green-700 p-2 rounded mb-2">
			{{ msg }}
		</div>
	{% endfor %}
	<div class="container mx-auto p-6">
		<div class="max-w-3xl mx-auto bg-white p-6 rounded shadow">
			<h1 class="text-4xl font-bold text-center mb-8">{{ book.title }}</h1>

			<div class="flex flex-col md:flex-row gap-6">
				{% if book.thumbnail %}
					<div class="md:w-1/2">
						<img src="{{ book.thumbnail }}" alt="Image du livre" class="w-full h-72 object-cover rounded shadow">
					</div>
				{% else %}
					<div class="md:w-1/2 h-72 bg-gray-300 flex items-center justify-center text-gray-500 rounded">
						Pas d'image
					</div>
				{% endif %}

				<div class="md:w-1/2 flex flex-col justify-center">
					<p class="text-lg text-gray-700 mb-4">Auteur(s) :
						{{ book.authors|join(', ') ?: 'Inconnu' }}</p>

					<h2 class="text-xl font-semibold mb-2">Description</h2>
					<p class="text-gray-700 mb-4">{{ book.description ?: 'Aucune description disponible' }}</p>

					<p class="text-gray-700">
						ISBN :
						{{ book.isbn ?: 'Non disponible' }}</p>

					<p class="text-gray-700">Publié le :
						{{ book.publishedDate ?: 'Date non disponible' }}</p>

					{# {% if book.rating is not null %}
										                            <p class="text-gray-700 mb-4">⭐ {{ book.rating }}/5</p>
										                    {% endif %} #}

					<!-- Bouton "Emprunter ce livre" -->
					<a href="{{ path('loan_request', { 'id': book.id }) }}" class="inline-block mt-4 px-6 py-2 bg-green-600 text-white font-semibold rounded hover:bg-green-700 transition">
						Emprunter ce livre
					</a>

					<a href="{{ path('home') }}" class="mt-auto inline-block px-6 py-2 bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 transition">Retour à la liste</a>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
